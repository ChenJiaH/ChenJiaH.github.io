<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>vue入门实例-基于vue&amp;vue-router重写Cnode社区 | McChen - 博客</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="Javascript,Vuejs," />
  

  <meta name="description" content="vue入门实例-基于vue&amp;vue-router重写Cnode社区">
<meta property="og:type" content="article">
<meta property="og:title" content="vue入门实例-基于vue&vue-router重写Cnode社区">
<meta property="og:url" content="http://mcchen.club/2016/12/23/vue入门实例-基于vue&vue-router重写Cnode社区/index.html">
<meta property="og:site_name" content="McChen - 博客">
<meta property="og:description" content="vue入门实例-基于vue&amp;vue-router重写Cnode社区">
<meta property="og:image" content="http://mcchen.club/images/2016-12-23_000001.png">
<meta property="og:image" content="http://mcchen.club/images/2016-12-23_000002.png">
<meta property="og:updated_time" content="2016-12-23T10:35:37.894Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="vue入门实例-基于vue&vue-router重写Cnode社区">
<meta name="twitter:description" content="vue入门实例-基于vue&amp;vue-router重写Cnode社区">
<meta name="twitter:image" content="http://mcchen.club/images/2016-12-23_000001.png">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=d671a41f" rel="stylesheet">


  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?2b0aba80cce5bf5627dd15f538ec6fc6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
</head>

<body>
  <a href="https://github.com/ChenJiaH"><img style="position: absolute; z-index:1; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>

  
    <span id="toolbox-mobile" class="toolbox-mobile">盒子</span>
  

  <div class="post-header CENTER">
   
  <div class="toolbox">
    <a class="toolbox-entry" href="/">
      <span class="toolbox-entry-text">盒子</span>
      <i class="icon-angle-down"></i>
      <i class="icon-home"></i>
    </a>
    <ul class="list-toolbox">
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/archives/"
            rel="noopener noreferrer"
            target="_self"
            >
            博客
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/category/"
            rel="noopener noreferrer"
            target="_self"
            >
            分类
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/tag/"
            rel="noopener noreferrer"
            target="_self"
            >
            标签
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/link/"
            rel="noopener noreferrer"
            target="_self"
            >
            友链
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/about/"
            rel="noopener noreferrer"
            target="_self"
            >
            关于
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/search/"
            rel="noopener noreferrer"
            target="_self"
            >
            搜索
          </a>
        </li>
      
        <li class="item-toolbox">
          <a
            class="CIRCLE"
            href="/atom.xml"
            rel="noopener noreferrer"
            target="_blank"
            >
            RSS
          </a>
        </li>
      
    </ul>
  </div>


</div>


  <div id="toc" class="toc-article">
    <strong class="toc-title">文章目录</strong>
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#项目介绍"><span class="toc-text">项目介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#文档"><span class="toc-text">文档</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Github"><span class="toc-text">Github</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#项目开始之前的乱七八糟"><span class="toc-text">项目开始之前的乱七八糟</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开发步骤"><span class="toc-text">开发步骤</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#通过vue官网提供的命令行工具快速搭建一个应用"><span class="toc-text">通过vue官网提供的命令行工具快速搭建一个应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#取Cnode社区最常用的主题页相关入手"><span class="toc-text">取Cnode社区最常用的主题页相关入手</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#版本"><span class="toc-text">版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#缺点与小尾巴"><span class="toc-text">缺点与小尾巴</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#缺点"><span class="toc-text">缺点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#写在结尾的话"><span class="toc-text">写在结尾的话</span></a></li></ol></li></ol>
  </div>



<div class="content content-post CENTER">
   <article id="post-vue入门实例-基于vue&amp;vue-router重写Cnode社区" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">vue入门实例-基于vue&amp;vue-router重写Cnode社区</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2016.12.23</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>McChen</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/Vuejs/">Vuejs</a>
  </span>



      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      

      
        <i class="icon-comment"></i> 
        <span class="ds-thread-count" data-thread-key="post-vue入门实例-基于vue&amp;vue-router重写Cnode社区"><i class="fa fa-spinner fa-spin"></i></span> 条评论
      
      
    </div>
  </header>

  <div class="article-content">
    
      <h2 id="项目介绍"><a href="#项目介绍" class="headerlink" title="项目介绍"></a>项目介绍</h2><p><a href="http://mcchen.club/project/vue-cnode/index.html">线上实例Demo</a></p>
<p>涉及到的技术包括但不限于：<code>vue</code>、<code>vue-router</code>、<code>webpack</code>、<code>zepto</code>、<code>fastclick</code>、<code>scss</code></p>
<blockquote>
<p>Tips:vue&amp;vue-router这里使用的是2.0版</p>
</blockquote>
<h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="http://mcchen.club/2016/12/23/vue入门实例-基于vue&amp;vue-router重写Cnode社区/">文档</a></p>
<h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><p>Github地址：<a href="https://github.com/ChenJiaH/vue-cnode" target="_blank" rel="external">vue-cnode</a></p>
<p>线上地址:<a href="http://mcchen.club/project/vue-cnode/index.html">Demo实例地址</a></p>
<h2 id="项目开始之前的乱七八糟"><a href="#项目开始之前的乱七八糟" class="headerlink" title="项目开始之前的乱七八糟"></a>项目开始之前的乱七八糟</h2><p>最初的设想是完完全全由自己构建，这样能够熟悉全部的过程。</p>
<ul>
<li><p>创建项目目录层级(按照脚手架)</p>
</li>
<li><p>创建package.json，然后安装什么babel,各种loader等等一大堆乱七八糟</p>
</li>
<li><p>创建webpack.config.js，配置入口js，生成文件路径，预加载和加载资源等等</p>
</li>
<li><p>引入webpack plugins，通过这个webpack-hot-middleware实现重载</p>
</li>
</ul>
<p>配置了一大堆之后，发现还有问题，然后还需要考虑build的配置，遂，猝，享年1小时。然后果断选择vue官网脚手架入手。</p>
<blockquote>
<p>好了，下面进入正题。</p>
</blockquote>
<h2 id="开发步骤"><a href="#开发步骤" class="headerlink" title="开发步骤"></a>开发步骤</h2><h3 id="通过vue官网提供的命令行工具快速搭建一个应用"><a href="#通过vue官网提供的命令行工具快速搭建一个应用" class="headerlink" title="通过vue官网提供的命令行工具快速搭建一个应用"></a>通过vue官网提供的命令行工具快速搭建一个应用</h3><p><a href="https://github.com/vuejs/vue-cli" target="_blank" rel="external">Github文档</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 全局安装 vue-cli</span></div><div class="line">$ npm install --global vue-cli</div><div class="line"><span class="comment"># 创建一个基于 webpack 模板的新项目</span></div><div class="line">$ vue init webpack my-project</div><div class="line"><span class="comment"># 安装依赖，走你</span></div><div class="line">$ <span class="built_in">cd</span> my-project</div><div class="line">$ npm install</div><div class="line">$ npm run dev</div></pre></td></tr></table></figure>
<p>这个时候你会发现<code>my-project</code>项目已经自动创建，文件路径大致如下<br><img src="/images/2016-12-23_000001.png" alt="Alt text"></p>
<h3 id="取Cnode社区最常用的主题页相关入手"><a href="#取Cnode社区最常用的主题页相关入手" class="headerlink" title="取Cnode社区最常用的主题页相关入手"></a>取Cnode社区最常用的主题页相关入手</h3><p>大概可以分为主题页，主题详情页，评论点赞等设计到登录的这里暂时跳过，至于为什么？别问我，就是任性。</p>
<p>我这里全部采用单文件组件方式开发，即<code>*.vue</code>。</p>
<p><a href="https://cn.vuejs.org/v2/guide/single-file-components.html" target="_blank" rel="external">什么是单文件组件？</a></p>
<p>与vue相关的资源全部放在src文件夹下，无需vue渲染的资源放到static文件夹下，附上开发文件目录</p>
<p><img src="/images/2016-12-23_000002.png" alt="Alt text"></p>
<ul>
<li>我们先来看看main.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 引入vue</span></div><div class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span>;</div><div class="line"><span class="comment">// 引入zepto</span></div><div class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'webpack-zepto'</span>;</div><div class="line"><span class="comment">// 引入vue-router</span></div><div class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span>;</div><div class="line"><span class="comment">// 引入路由配置文件</span></div><div class="line"><span class="keyword">import</span> routes <span class="keyword">from</span> <span class="string">'./routes.js'</span>;</div><div class="line"><span class="comment">//  引入fastclick</span></div><div class="line"><span class="keyword">import</span> FastClick <span class="keyword">from</span> <span class="string">'fastclick'</span>;</div><div class="line"><span class="comment">// 引入页面入口文件，其实这个可以不要，我这里引入的唯一目的就是在App.vue下加载全局通用css</span></div><div class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></div><div class="line"></div><div class="line"><span class="comment">// ajax设置跨域</span></div><div class="line">$.ajaxSettings.crossDomain = <span class="literal">true</span>;</div><div class="line"></div><div class="line"><span class="comment">/* eslint-disable no-new */</span></div><div class="line"></div><div class="line"><span class="comment">// 安装VueRouter插件</span></div><div class="line">Vue.use(VueRouter);</div><div class="line"></div><div class="line"><span class="comment">// 创建一个router的实例对象</span></div><div class="line"><span class="keyword">var</span> router = <span class="keyword">new</span> VueRouter(&#123;</div><div class="line">  routes</div><div class="line">&#125;);</div><div class="line"><span class="comment">// 移动端修复点透和延时</span></div><div class="line">FastClick.attach(<span class="built_in">document</span>.body);</div><div class="line"></div><div class="line"><span class="comment">// 创建一个Vue实例对象</span></div><div class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">"#app"</span>,   <span class="comment">// 挂载元素，这里挂载到index.html中id为app的元素上</span></div><div class="line">  router,   <span class="comment">// 引入路由，等于router: router</span></div><div class="line">  template: <span class="string">'&lt;App/&gt;'</span>,   <span class="comment">// 注意:这里如果使用了template，那么&lt;App&gt;&lt;/App&gt;将会替换你整个id为app的元素，除非里面含有slot标签，你想用render也是一个道理</span></div><div class="line">  components: &#123; <span class="comment">// 组件引入，App对应的就是&lt;App&gt;&lt;/App&gt;</span></div><div class="line">    App</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<ul>
<li>接下来看看路由配置routes.js</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 引入路由对应的组件</span></div><div class="line"><span class="keyword">import</span> preLoader <span class="keyword">from</span> <span class="string">'./assets/view/preLoader.vue'</span>;</div><div class="line"><span class="keyword">import</span> all <span class="keyword">from</span> <span class="string">'./assets/view/all.vue'</span>;</div><div class="line"><span class="keyword">import</span> topic <span class="keyword">from</span> <span class="string">'./assets/view/topic.vue'</span>;</div><div class="line"><span class="keyword">import</span> about <span class="keyword">from</span> <span class="string">'./assets/view/about.vue'</span>;</div><div class="line"></div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</div><div class="line">  &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">"/"</span>,  <span class="comment">// 路由路径，当页面路径为.../#/的时候使用组件preLoader去渲染页面</span></div><div class="line">    name: <span class="string">"home"</span>,   <span class="comment">// 可以理解为key</span></div><div class="line">    component: preLoader    <span class="comment">// 组件</span></div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">"/all"</span>,</div><div class="line">    <span class="attr">name</span>: <span class="string">"all"</span>,</div><div class="line">    <span class="attr">component</span>: all</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">"/topic/:id"</span>,</div><div class="line">    <span class="attr">name</span>: <span class="string">"topic"</span>,</div><div class="line">    <span class="attr">component</span>: topic</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">"/about"</span>,</div><div class="line">    <span class="attr">name</span>: <span class="string">"about"</span>,</div><div class="line">    <span class="attr">component</span>: about</div><div class="line">  &#125;</div><div class="line">];</div></pre></td></tr></table></figure>
<ul>
<li>如何实现页面跳转，我们来看看根页面的组件preLoader.vue</li>
</ul>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">// template里面就是等待渲染html结构</div><div class="line">&lt;template&gt;</div><div class="line">  &lt;div id="pageLoader" v-show="show"&gt;&lt;img src="~assets/images/preLoad.gif" alt=""&gt;&lt;/div&gt;</div><div class="line">&lt;/template&gt;</div><div class="line">&lt;script&gt;</div><div class="line">    // 不习惯export写法可以用 module.exports = &#123;&#125;</div><div class="line">    export default &#123;</div><div class="line">      name: 'preLoader',</div><div class="line">      data ()&#123;</div><div class="line">        return &#123;</div><div class="line">          show: true</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      mounted: function () &#123;</div><div class="line">        // 往this.$router里push一个name为all的对象，意味着路由将跳转到/#/ + all =&gt; /#/all，这里还有其他的模式，不论</div><div class="line">        setTimeout (() =&gt; &#123;</div><div class="line">          this.$router.push(&#123;</div><div class="line">            name: 'all'</div><div class="line">          &#125;);</div><div class="line">          this.show = false;</div><div class="line">        &#125;,1314);</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div><div class="line">// 这里如果要使用scss的话必须加上lang="scss"，为了让ide不报错，给style加上rel跟type如下就可以了</div><div class="line">// 注意：vue-cli默认最后是编译处理css的，这里想使用scss必须安装style-loader和vue-style-loader，不需要改webpack配置</div><div class="line">&lt;style rel="stylesheet/scss" type="text/css"  lang="scss"&gt;</div><div class="line">  .main-wrap &#123; position: relative; max-width: 750px; min-width: 320px; margin: 0 auto; width: 100%; min-height: 100%;&#125;</div><div class="line">  #pageLoader &#123; position: fixed; left: 50%; top: 50%; transform: translate(-50%,-50%) translateZ(0); width: 160px; height: 20px;&#125;</div><div class="line">&lt;/style&gt;</div></pre></td></tr></table></figure>
<ul>
<li>页面跳转之后进入到主题的列表页all.vue，template跟style没什么好说的，正常写吧，来看看script部分</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 引入组件</span></div><div class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'webpack-zepto'</span>;</div><div class="line"><span class="keyword">import</span> backTop <span class="keyword">from</span> <span class="string">'../components/backtop.vue'</span>;</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">"all"</span>,</div><div class="line">  <span class="attr">components</span>: &#123;</div><div class="line">    backTop,</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">filters</span>: &#123;</div><div class="line">    <span class="attr">getFreeTime</span>: <span class="function"><span class="keyword">function</span> (<span class="params">time</span>) </span>&#123;    <span class="comment">// 这里是自定义过滤器，由于vue2.0干掉了默认提供的filters，所以要使用的话需要自行编写</span></div><div class="line">      <span class="comment">// Code</span></div><div class="line">      <span class="keyword">return</span> time</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  data ()&#123;</div><div class="line">    <span class="keyword">return</span> &#123;</div><div class="line">      <span class="attr">SCROLL_LOCK</span>: <span class="literal">false</span>, <span class="comment">// 滚动锁，在ajax触发之后完成之前保证不会再次发出请求</span></div><div class="line">      menuShow: <span class="literal">false</span>,    <span class="comment">// menu菜单控制器</span></div><div class="line">      topics: [], <span class="comment">// 数据</span></div><div class="line">      params: &#123;   <span class="comment">// 请求参数</span></div><div class="line">        page: <span class="number">1</span>,</div><div class="line">        <span class="attr">limit</span>: <span class="number">20</span>,</div><div class="line">        <span class="attr">tab</span>: <span class="string">'all'</span>,</div><div class="line">        <span class="attr">mdrender</span>: <span class="literal">true</span></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">mounted</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;  <span class="comment">// 当结构挂载之后</span></div><div class="line">    <span class="comment">// 这里就是我们要做的事情了...</span></div><div class="line"></div><div class="line">    <span class="comment">// 先判断是否存在tab</span></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.$route.query &amp;&amp; <span class="keyword">this</span>.$route.query.tab) &#123;</div><div class="line">      <span class="keyword">this</span>.params.tab = <span class="keyword">this</span>.$route.query.tab; <span class="comment">// 当前所在类别</span></div><div class="line">      $(<span class="string">".menu-list a"</span>).eq(<span class="keyword">this</span>.getTitle(<span class="keyword">this</span>.$route.query.tab).idx).addClass(<span class="string">"active"</span>).siblings(<span class="string">"a"</span>).removeClass(<span class="string">"active"</span>);</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">      $(<span class="string">".menu-list a"</span>).eq(<span class="number">0</span>).addClass(<span class="string">"active"</span>).siblings(<span class="string">"a"</span>).removeClass(<span class="string">"active"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 请求数据，这里提为一个methods了，因为存在多次调用</span></div><div class="line">    <span class="keyword">this</span>.getTopics();</div><div class="line">    $(<span class="string">"body"</span>).removeClass(<span class="string">"os-mode"</span>);</div><div class="line"></div><div class="line">    <span class="comment">// 滚动</span></div><div class="line">    <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line">    $(<span class="built_in">window</span>).on(<span class="string">"scroll"</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      self.getScrollData()</div><div class="line">    &#125;)</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">methods</span>: &#123;</div><div class="line">    <span class="attr">getTitle</span>: <span class="function"><span class="keyword">function</span> (<span class="params">val</span>) </span>&#123;</div><div class="line">      <span class="comment">// 获取动态的标题</span></div><div class="line">      <span class="keyword">return</span> obj;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">getTopics</span>: <span class="function"><span class="keyword">function</span> (<span class="params">type</span>) </span>&#123;  <span class="comment">// 请求数据</span></div><div class="line">      <span class="keyword">var</span> self = <span class="keyword">this</span>;</div><div class="line">      $.get(<span class="string">"https://cnodejs.org/api/v1/topics"</span>, self.params, <span class="function"><span class="keyword">function</span> (<span class="params">res</span>) </span>&#123;</div><div class="line">        <span class="keyword">if</span> (res &amp;&amp; res.data) &#123;  <span class="comment">// 如果查到数据</span></div><div class="line">          self.SCROLL_LOCK = <span class="literal">true</span>;</div><div class="line">          self.topics = res.data;</div><div class="line">        &#125;</div><div class="line">      &#125;)</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// 滚动加载数据</span></div><div class="line">    getScrollData() &#123;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.SCROLL_LOCK) &#123;</div><div class="line">        <span class="keyword">var</span> totalheight = $(<span class="built_in">window</span>).height() + $(<span class="built_in">window</span>).scrollTop();</div><div class="line">        <span class="keyword">if</span> ($(<span class="built_in">document</span>).height() &lt;= totalheight + <span class="number">200</span>) &#123;</div><div class="line">          <span class="keyword">this</span>.SCROLL_LOCK = <span class="literal">false</span>;</div><div class="line">          <span class="keyword">this</span>.params.limit += <span class="number">20</span>;</div><div class="line">          <span class="keyword">this</span>.getTopics();</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// 显示sidebar</span></div><div class="line">    openMenu: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.menuShow = <span class="literal">true</span>;</div><div class="line">      $(<span class="string">"body"</span>).addClass(<span class="string">"os-mode"</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="comment">// 收起sidebar</span></div><div class="line">    closeMenu: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">this</span>.menuShow = <span class="literal">false</span>;</div><div class="line">      $(<span class="string">"body"</span>).removeClass(<span class="string">"os-mode"</span>);</div><div class="line">    &#125;,</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">computed</span>: &#123; <span class="comment">// 计算属性，适用于频繁变动</span></div><div class="line">    title: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.getTitle(<span class="keyword">this</span>.params.tab).title;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">getOpenClass</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">      <span class="keyword">if</span> (<span class="keyword">this</span>.menuShow) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">"open"</span>;</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="string">""</span>;</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">watch</span>: &#123;    <span class="comment">// 监听器</span></div><div class="line">    $route: <span class="function"><span class="keyword">function</span> (<span class="params">to, from</span>) </span>&#123;     <span class="comment">// 这里是核心，监听$route(路由的配置对象),一旦这玩意变了，就肯定有情况</span></div><div class="line">      <span class="comment">// 如果是当前页面切换分类的情况</span></div><div class="line">      <span class="keyword">if</span> (to.query &amp;&amp; to.query.tab) &#123;</div><div class="line">        <span class="keyword">this</span>.params.tab = to.query.tab;</div><div class="line">        $(<span class="string">".menu-list a"</span>).eq(<span class="keyword">this</span>.getTitle(to.query.tab).idx).addClass(<span class="string">"active"</span>).siblings(<span class="string">"a"</span>).removeClass(<span class="string">"active"</span>);</div><div class="line">      &#125; <span class="keyword">else</span> &#123;</div><div class="line">        $(<span class="string">".menu-list a"</span>).eq(<span class="number">0</span>).addClass(<span class="string">"active"</span>).siblings(<span class="string">"a"</span>).removeClass(<span class="string">"active"</span>);</div><div class="line">      &#125;</div><div class="line">      <span class="keyword">this</span>.getTopics();</div><div class="line">      <span class="comment">// 隐藏导航栏</span></div><div class="line">      <span class="keyword">this</span>.menuShow = <span class="literal">false</span>;</div><div class="line">      $(<span class="string">"body"</span>).removeClass(<span class="string">"os-mode"</span>);</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>一个完整的组件就大概是上述几个步骤了，按照<a href="https://github.com/ChenJiaH/vue-cnode" target="_blank" rel="external">源码</a>安装编写试试吧</li>
</ul>
<h2 id="版本"><a href="#版本" class="headerlink" title="版本"></a>版本</h2><p>1.0.0</p>
<h2 id="缺点与小尾巴"><a href="#缺点与小尾巴" class="headerlink" title="缺点与小尾巴"></a>缺点与小尾巴</h2><h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3><ul>
<li><p>其实里面组件分的并不细，比如header、sidebar都可以单独抽出来作为组件存在，可以减少代码量</p>
</li>
<li><p>还可以拓展评论，登录，用户信息等一些列<a href="https://cnodejs.org/api" target="_blank" rel="external">CNode API</a>提供的功能页面</p>
</li>
<li><p>如果没有脚手架，直接上手开发复杂度不低</p>
</li>
<li><p>这里还没有引入vuex做状态管理，如果涉及到非父子组件通信建议使用</p>
</li>
</ul>
<h3 id="写在结尾的话"><a href="#写在结尾的话" class="headerlink" title="写在结尾的话"></a>写在结尾的话</h3><p>CNode项目还是比较建议作为一个vue&amp;vue-router的入门级练手项目，因为里面实际上涉及到了单页路由的切换管理，同时也实现了日常开发的一些基本功能：包括tab页签切换，ajax请求数据，能够满足日常项目的基本要求。</p>
<blockquote>
<p>特别简单的页面不建议使用，正常html+css+js的效率远高于使用vue.</p>
</blockquote>
<hr>
<p>如果能给您带去些许帮助，鄙人不甚欢心。如有错误，恳请交流指出，谢谢！<br>转载请注明出处：<a href="http://mcchen.club/">http://mcchen.club/</a></p>
<hr>

    
  </div>
</article>


   
  <div class="text-center donation">
    <div class="inner-donation">
      <span class="btn-donation">支持一下</span>
      <div class="donation-body">
        <div class="tip text-center">扫一扫，支持McChen</div>
        <ul class="theme.donation.items.length">
        
          <li class="item">
            <img src="/images/qr-wechat.png" alt="">
          </li>
        
          <li class="item">
            <img src="/images/qr-alipay.png" alt="">
          </li>
        
        </ul>
      </div>
    </div>
  </div>


   
  <div class="box-prev-next clearfix">
    <a class="show pull-left" href="/2017/01/04/[译文]如果你是一个前端开发者，那么2017年你该学习什么/">
        <i class="icon icon-angle-left"></i>
    </a>
    <a class="show pull-right" href="/2016/12/13/Nodejs创建缩略图/">
        <i class="icon icon-angle-right"></i>
    </a>
  </div>




</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">关闭</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              博客
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/category/"
              rel="noopener noreferrer"
              target="_self"
              >
              分类
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/tag/"
              rel="noopener noreferrer"
              target="_self"
              >
              标签
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/link/"
              rel="noopener noreferrer"
              target="_self"
              >
              友链
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              关于
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/search/"
              rel="noopener noreferrer"
              target="_self"
              >
              搜索
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="CIRCLE"
              href="/atom.xml"
              rel="noopener noreferrer"
              target="_blank"
              >
              RSS
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    

    
  <section class="duoshuo-comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread" data-thread-key="post-vue入门实例-基于vue&amp;vue-router重写Cnode社区" 
      data-title="vue入门实例-基于vue&amp;vue-router重写Cnode社区" data-url="http://mcchen.club/2016/12/23/vue入门实例-基于vue&amp;vue-router重写Cnode社区/index.html"></div>
    <!-- 多说评论框 end -->
  </section>




  <script type="text/javascript">
  var duoshuoQuery = {short_name:"mcchen"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>


  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
        // load success
    });
  }
</script>

</body>
</html>
